<div class="bg-gray-100 top-0 py-1 lg:py-2 w-full lg:relative z-50">
  <nav class="z-10 sticky top-0 left-0 right-0 max-w-4xl xl:max-w-5xl mx-auto px-5 py-2.5 lg:border-none lg:py-4">
    <div class="flex items-center justify-between">
      <!-- Logo -->
      <a href="/">
        <div class="flex items-center space-x-2">
          <img src="/logo.png" alt="Logo" class="w-30 h-9" />
        </div>
      </a>

      <!-- Enlaces -->
      <div class="hidden lg:block">
        <ul class="flex space-x-10 text-lg font-bold text-blue-900">
          <li><a href="/">Inicio</a></li>
          <li><a href="/Servicios">Servicios</a></li>
          <li><a href="/Nosotros">Nosotros</a></li>
          <li><a href="/Contacto">Contacto</a></li>
        </ul>
      </div>

      <!-- Botones si no ha iniciado sesión (escritorio) -->
      <div class="hidden lg:flex lg:items-center gap-x-2" id="auth-buttons">
        <a href="/auth/register"><button class="text-blue-950 px-6 py-2.5 font-semibold">Registrarse</button></a>
        <a href="/auth/login"><button class="bg-[#FF6700] text-white px-6 py-2.5 font-semibold rounded-md">Iniciar Sesión</button></a>
      </div>

      <!-- Nombre del usuario si inició sesión (escritorio) -->
      <div class="hidden lg:flex lg:items-center gap-x-2 text-black font-bold" id="user-info-top" style="display: none;">
        <!-- Este div será visible en pantallas grandes -->
      </div>

      <!-- Icono menú móvil -->
      <div class="flex lg:hidden">
        <button id="mobile-menu-toggle">
          <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" class="w-6 h-6">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"></path>
          </svg>
        </button>
      </div>
    </div>
  </nav>

  <!-- Menú móvil -->
  <div class="lg:hidden" id="mobile-menu" style="display: none;">
    <ul class="space-y-4 p-5">
      <li><a href="/">Inicio</a></li>
      <li><a href="/Servicios">Servicios</a></li>
      <li><a href="/Nosotros">Nosotros</a></li>
      <li><a href="/Contacto">Contacto</a></li>

      <!-- Nombre del usuario si inició sesión (menú móvil) -->
      <div class="text-black font-bold" id="user-info-mobile" style="display: none;">
        <!-- Este div será visible en el menú móvil -->
      </div>
    </ul>

    <!-- Botones si no ha iniciado sesión (menú móvil) -->
    <div class="flex flex-col items-start gap-2 px-5" id="auth-buttons-mobile">
      <a href="/auth/register"><button class="text-blue-950 px-6 py-2.5 font-semibold w-full text-left">Registrarse</button></a>
      <a href="/auth/login"><button class="bg-[#FF6700] text-white px-6 py-2.5 font-semibold rounded-md w-full text-left">Iniciar Sesión</button></a>
    </div>
  </div>
</div>

<!-- Script para manejar la autenticación y el menú móvil -->
<script type="module">
  document.addEventListener("DOMContentLoaded", () => {
    const id = localStorage.getItem("usuario_id");
    const nombre = localStorage.getItem("nombre_usuario");
    const authButtons = document.getElementById("auth-buttons"); // Escritorio
    const authButtonsMobile = document.getElementById("auth-buttons-mobile"); // Móvil
    const userInfoTop = document.getElementById("user-info-top"); // Escritorio
    const userInfoMobile = document.getElementById("user-info-mobile"); // Móvil
    const mobileMenu = document.getElementById("mobile-menu");
    const mobileMenuToggle = document.getElementById("mobile-menu-toggle");

    // Manejo de autenticación
    if (id && nombre) {
      if (authButtons) authButtons.style.display = "none";
      if (authButtonsMobile) authButtonsMobile.style.display = "none";

      if (userInfoTop) {
        userInfoTop.style.display = "flex";
        userInfoTop.innerHTML = `<a href="/usuario/${id}" class="hover:underline">Hola, ${nombre}</a>`;
      }

      if (userInfoMobile) {
        userInfoMobile.style.display = "block";
        userInfoMobile.innerHTML = `<a href="/usuario/${id}" class="hover:underline">Hola, ${nombre}</a>`;
      }
    }

    // Función para alternar el menú móvil
    mobileMenuToggle.addEventListener("click", () => {
      mobileMenu.style.display = (mobileMenu.style.display === "none" || mobileMenu.style.display === "")
        ? "block"
        : "none";
    });
  });
</script>
